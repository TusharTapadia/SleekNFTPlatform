{"ast":null,"code":"var _jsxFileName = \"/Users/tushartapadia/Desktop/SleekNFT/src/MarketPlace.js\",\n    _s = $RefreshSig$();\n\nimport ArrowForwardIosIcon from '@material-ui/icons/ArrowForwardIos';\nimport ArrowBackIosIcon from '@material-ui/icons/ArrowBackIos';\nimport React, { useState, useEffect } from 'react';\nimport { useMoralisCloudFunction, useMoralis, useMoralisQuery } from 'react-moralis';\nimport Moralis from 'moralis';\nimport { marketplaceContractAbi } from './abi.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MARTKETPLACE_CONTRACT_ADDRESS = \"0xD09eEd06f09db762F181f37d354c4B6debf9fd31\";\n\nconst MarketPlace = () => {\n  _s();\n\n  const {\n    user,\n    web3\n  } = useMoralis();\n  const {\n    data\n  } = useMoralisCloudFunction(\"getItems\");\n  const [title, setTitle] = useState('Empty');\n  const [description, setDescription] = useState('No NFTs in the market place');\n  const [price, setPrice] = useState(0);\n  const [source, setSource] = useState('/ethbanner1.svg');\n  const [seller, setSeller] = useState('Unknown');\n  const [count, setCount] = useState(0);\n  const marketplaceContract = new web3.eth.Contract(marketplaceContractAbi, MARTKETPLACE_CONTRACT_ADDRESS);\n  const items = JSON.parse(JSON.stringify(data)); // const onItemSold = () => {\n  //             console.log(\"Item sold\");\n  //         }\n  // const soldItemsQuery = new Moralis.Query('SoldItems');\n  // const soldItemsSubscription = soldItemsQuery.subscribe();\n  // soldItemsSubscription.on(\"create\", onItemSold);\n  // useEffect(async () => {\n  //     const onItemSold = () => {\n  //         console.log(\"Item sold\");\n  //     }\n  //     let query = new Moralis.Query(\"Data\");\n  //     let subscription = await query.subscribe();\n  //     subscription.on(\"create\", onItemSold);\n  //   }, []);\n\n  useEffect(() => {\n    if (items) {\n      fetch(items[count].tokenuri).then(res => res.json()).then(nft => {\n        setTitle(nft.name);\n        setDescription(nft.description);\n        setSource(nft.image);\n        setPrice(items[count].askingPrice);\n        setSeller(items[count].sellerUsername);\n      });\n    }\n\n    console.log(items);\n  });\n\n  const buyItem = async item => {\n    console.log(\"I'm clicked\"); // const myWalletAddress = user.get('ethAddress');\n\n    await marketplaceContract.methods.buyItem(item[count].uid).send({\n      from: user.get('ethAddress'),\n      value: item[count].askingPrice\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"relative h-screen bg-gradient-to-r from-primary to-secondary \",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-my-black-color text-3xl font-bold px-640 pt-10\",\n      children: \"Explore NFTs\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 12\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute top-130 left-500 bg-my-black-color p-5 rounded-md\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"object-contain\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: source,\n          alt: \"your nft\",\n          className: \"h-350 w-350 p-5 pb-0\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 16\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 16\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-evenly\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"p-3 text-center\",\n            children: title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 16\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"bg-gradient-to-r from-primary to-secondary text-my-black-color m-2 px-3 py-3 rounded-2xl\",\n            onClick: () => buyItem(items),\n            children: [price, \" SLE\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 16\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 16\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"p-3\",\n          children: description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 20\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 16\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 12\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute text-my-black-color top-180 left-400 cursor-pointer\",\n      onClick: () => count > 0 ? setCount(count - 1) : setCount(data.length - 1),\n      children: /*#__PURE__*/_jsxDEV(ArrowBackIosIcon, {\n        fontSize: \"large\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 12\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 12\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute text-my-black-color top-180 right-450 cursor-pointer\",\n      onClick: () => count === data.length - 1 ? setCount(0) : setCount(count + 1),\n      children: /*#__PURE__*/_jsxDEV(ArrowForwardIosIcon, {\n        fontSize: \"large\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 12\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 12\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute top-640 left-700 py-2 px-4 rounded-full bg-my-black-color\",\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-center text-my-gold-color\",\n        children: count + 1\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 16\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 12\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 10\n  }, this);\n};\n\n_s(MarketPlace, \"ejDD/T5Ah13V3c3/OU3cZoUY6dA=\", false, function () {\n  return [useMoralis, useMoralisCloudFunction];\n});\n\n_c = MarketPlace;\nexport default MarketPlace;\n\nvar _c;\n\n$RefreshReg$(_c, \"MarketPlace\");","map":{"version":3,"sources":["/Users/tushartapadia/Desktop/SleekNFT/src/MarketPlace.js"],"names":["ArrowForwardIosIcon","ArrowBackIosIcon","React","useState","useEffect","useMoralisCloudFunction","useMoralis","useMoralisQuery","Moralis","marketplaceContractAbi","MARTKETPLACE_CONTRACT_ADDRESS","MarketPlace","user","web3","data","title","setTitle","description","setDescription","price","setPrice","source","setSource","seller","setSeller","count","setCount","marketplaceContract","eth","Contract","items","JSON","parse","stringify","fetch","tokenuri","then","res","json","nft","name","image","askingPrice","sellerUsername","console","log","buyItem","item","methods","uid","send","from","get","value","length"],"mappings":"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","sourcesContent":["import ArrowForwardIosIcon from '@material-ui/icons/ArrowForwardIos';\nimport ArrowBackIosIcon from '@material-ui/icons/ArrowBackIos';\nimport React, { useState, useEffect } from 'react'\nimport { useMoralisCloudFunction,useMoralis,useMoralisQuery } from 'react-moralis'\nimport Moralis from 'moralis'; \nimport {marketplaceContractAbi} from './abi.js';\n\nconst MARTKETPLACE_CONTRACT_ADDRESS=\"0xD09eEd06f09db762F181f37d354c4B6debf9fd31\";\n\n\n\nconst MarketPlace = () => {\n    const {user,web3} = useMoralis();\n    const {data} = useMoralisCloudFunction(\"getItems\");\n    const [title, setTitle] = useState('Empty');\n    const [description, setDescription] = useState('No NFTs in the market place');\n    const [price,setPrice] = useState(0);\n    const [source, setSource] = useState('/ethbanner1.svg');\n    const [seller,setSeller] = useState('Unknown');\n    const [count, setCount] = useState(0);\n    const marketplaceContract = new web3.eth.Contract(marketplaceContractAbi, MARTKETPLACE_CONTRACT_ADDRESS);\n    const items = JSON.parse(JSON.stringify(data));\n    // const onItemSold = () => {\n    //             console.log(\"Item sold\");\n    //         }\n    // const soldItemsQuery = new Moralis.Query('SoldItems');\n    // const soldItemsSubscription = soldItemsQuery.subscribe();\n    // soldItemsSubscription.on(\"create\", onItemSold);\n    // useEffect(async () => {\n    //     const onItemSold = () => {\n    //         console.log(\"Item sold\");\n    //     }\n    //     let query = new Moralis.Query(\"Data\");\n    //     let subscription = await query.subscribe();\n    //     subscription.on(\"create\", onItemSold);\n    //   }, []);\n    \n\n      useEffect(()=>{\n        if(items){\n        fetch(items[count].tokenuri)\n        .then( res => res.json())\n        .then( nft => {\n            setTitle(nft.name);\n            setDescription(nft.description);\n            setSource(nft.image);\n            setPrice(items[count].askingPrice);\n            setSeller(items[count].sellerUsername);\n        });\n    }\n    console.log(items);\n    },);\n    const buyItem = async (item) => {\n        console.log(\"I'm clicked\");\n        // const myWalletAddress = user.get('ethAddress');\n        await marketplaceContract.methods.buyItem(item[count].uid).send({from: user.get('ethAddress'), value: item[count].askingPrice});\n    }\n\n \n \n    return (\n         <div className=\"relative h-screen\n        bg-gradient-to-r from-primary to-secondary \">\n           <h1 className=\"text-my-black-color text-3xl font-bold px-640 pt-10\">Explore NFTs</h1>  \n           <div className=\"absolute top-130 left-500 bg-my-black-color p-5 rounded-md\">\n               <div className=\"object-contain\">\n               <img src={source} alt=\"your nft\" className=\"h-350 w-350 p-5 pb-0\" />\n               </div>\n               <div>\n               <div className=\"flex justify-evenly\">\n               <h3 className=\"p-3 text-center\">{title}</h3>\n               <button type=\"submit\" className=\"bg-gradient-to-r from-primary to-secondary text-my-black-color m-2 px-3 py-3 rounded-2xl\" onClick={() => buyItem(items)}>{price} SLE</button>\n               </div>\n                   \n                   <p className=\"p-3\">{description}</p>\n               </div>\n           </div>\n           <div className=\"absolute text-my-black-color top-180 left-400 cursor-pointer\" onClick={() => (count > 0 ? setCount(count-1): setCount(data.length-1))}>\n           <ArrowBackIosIcon  fontSize=\"large\" />\n           </div>\n           <div className=\"absolute text-my-black-color top-180 right-450 cursor-pointer\" onClick={() => (count === data.length-1? setCount(0) : setCount(count+1))}>\n           <ArrowForwardIosIcon fontSize=\"large\"/> \n           </div>\n           <div className=\"absolute top-640 left-700 py-2 px-4 rounded-full bg-my-black-color\">\n               <h1 className=\"text-center text-my-gold-color\">{count+1}</h1>\n           </div>\n           </div>\n    )\n}\n\nexport default MarketPlace\n\n"]},"metadata":{},"sourceType":"module"}